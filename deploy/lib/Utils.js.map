{"version":3,"sources":["../../sources/lib/Utils.js"],"names":["module","exports","target","opt_superclass","SyntaxError","undefined","Object","create","constructor","superclass","values","opt_keys","opt_attributes","TypeError","writable","enumerable","configurable","key","defineProperty","value","Array","forEach","targetKey","opt_skipUndefined","every"],"mappings":"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","file":"Utils.js","sourcesContent":["/**\n * @fileoverview General JavaScript utils\n * This file is a part of TeXnous project.\n *\n * @copyright TeXnous project team (http://texnous.org) 2016\n * @license LGPL-3.0\n *\n * This library is free software; you can redistribute it and/or modify it under the terms of the\n * GNU Lesser General Public License as published by the Free Software Foundation; either version 3\n * of the License, or (at your option) any later version.\n *\n * This library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without\n * even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n * Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License along with this library;\n * if not, write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA\n * 02111-1307, USA.\n */\n\n'use strict';\n\n/**@module */\n\n\n/**\n * Extend a class with another one.\n * @param {!function} target the class to extend\n * @param {!function=} opt_superclass the class to extend with\n * @author Kirill Chuvilin <k.chuvilin@texnous.org>\n */\nmodule.exports['extend'] = function (target, opt_superclass) {\n  if (typeof target !== 'function') throw new SyntaxError('target isn\\'t a function');\n  if (opt_superclass !== undefined) { // if the superclass is defined\n    if (typeof opt_superclass !== 'function') throw new SyntaxError('superclass isn\\'t a function');\n    target['prototype'] = Object.create(opt_superclass['prototype']);\n    target['prototype'].constructor = target; // return the original constructor\n    target.superclass = opt_superclass['prototype'];\n  }\n};\n\n\n/**\n * Update object properties by property values\n * @param {!Object} target the object to copy properties to\n * @param {!Object} values the object with property values (undefined values will be skipped)\n * @param {(!Object.<string,string>|!Array.<string>)=} opt_keys\n *        list of keys or map of the target keys to the property names, all the enumerable\n *        properties will be used if undefined\n * @param {{writable:boolean,enumerable:boolean,configurable:boolean}=} opt_attributes\n *        property attributes, { writable: true, enumerable: true, configurable: true } by default\n * @author Kirill Chuvilin <k.chuvilin@texnous.org>\n */\nmodule.exports['updateProperties'] = function (target, values, opt_keys, opt_attributes) {\n  if (!(target instanceof Object)) throw new TypeError('\"target\" isn\\'t an Object instance');\n  if (values === undefined) return; // do noting is the sources is undefined\n  if (!(values instanceof Object)) throw new TypeError('\"properties\" isn\\'t an Object instance');\n  if (opt_attributes === undefined) {\n    opt_attributes = { writable: true, enumerable: true, configurable: true };\n  } else if (!(opt_attributes instanceof Object)) {\n    throw new TypeError('\"attributes\" isn\\'t an Object instance')\n  }\n  if (opt_keys === undefined) { // if the key map isn't defined\n    for (let key in values) { // for all the enumerable properties\n      //noinspection JSUnfilteredForInLoop\n      if (values[key] !== undefined) {\n        //noinspection JSUnfilteredForInLoop\n        Object.defineProperty(target, key, // update the property\n          // using the defined value\n          Object.create(opt_attributes, { value: { value: values[key] } })\n        );\n      }\n    }\n  } else if (opt_keys instanceof Array) { // if the list of the keys is defined\n    opt_keys.forEach(key => { if (values[key] !== undefined) {\n      Object.defineProperty(target, key, // update the property\n        Object.create(opt_attributes, {value: {value: values[key]}}) // using the defined value\n      );\n    }});\n  } else if (opt_keys instanceof Object) { // if the map of the keys is defined\n    for (let targetKey in opt_keys) { // for all the target keys\n      //noinspection JSUnfilteredForInLoop\n      let key = opt_keys[targetKey]; // the sources key\n      if (values[key] !== undefined)\n        //noinspection JSUnfilteredForInLoop\n        Object.defineProperty(target, targetKey, // update the property\n          // using the defined value\n          Object.create(opt_attributes, { value: { value: values[key] } })\n        );\n    }\n  } else { // if \"keys\" has unsupported value\n    throw new TypeError('\"keys\" isn\\'t an Object instance');\n  }\n};\n\n\n/**\n * Test object properties with property values (strict comparing is used)\n * @param {!Object} target the object with properties to test\n * @param {!Object} values the object with property values (undefined values will be skipped)\n * @param {(!Object.<string,string>|!Array.<string>)=} opt_keys\n *        list of keys or map of the target keys to the property names, all the enumerable\n *        properties will be used if undefined\n * @param {boolean=true} opt_skipUndefined true to skip keys with undefined values, false otherwise\n * @return {boolean} true if all the defined properties are the same false otherwise\n * @author Kirill Chuvilin <k.chuvilin@texnous.org>\n */\nmodule.exports['testProperties'] = function (target, values, opt_keys, opt_skipUndefined) {\n  if (!(target instanceof Object)) throw new TypeError('\"target\" isn\\'t an Object instance');\n  if (values === undefined) return true; // do noting is the sources is undefined\n  if (!(values instanceof Object)) throw new TypeError('\"properties\" isn\\'t an Object instance');\n  if (opt_skipUndefined === undefined) opt_skipUndefined = true; // skip undefined by default\n  if (opt_keys === undefined) { // if the key map isn't defined\n    for (let key in values) { // for all the enumerable properties\n      //noinspection JSUnfilteredForInLoop\n      if (target[key] !== values[key] && !(values[key] === undefined && opt_skipUndefined))\n        return false; // false if any value is different\n    }\n  } else if (opt_keys instanceof Array) { // if the list of the keys is defined\n    return opt_keys.every(key => {\n      return target[key] === values[key] || (values[key] === undefined && opt_skipUndefined);\n    });\n  } else if (opt_keys instanceof Object) { // if the map of the keys is defined\n    for (let targetKey in opt_keys) { // for all the target keys\n      //noinspection JSUnfilteredForInLoop\n      let key = opt_keys[targetKey]; // the sources key\n      //noinspection JSUnfilteredForInLoop\n      if (target[targetKey] !== values[key] && !(values[key] === undefined && opt_skipUndefined))\n        return false; // false if any value is different\n    }\n  } else { // if \"keys\" has unsupported value\n    throw new TypeError('\"keys\" isn\\'t an Object instance');\n  }\n  return true; // return true if all the defined properties are the same\n};\n"]}